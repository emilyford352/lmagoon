if (self.CavalryLogger) { CavalryLogger.start_js(["p3bjb"]); }

__d("NotificationAttachmentUtils",["NotificationAttachmentConfig"],(function a(b,c,d,e,f,g){"use strict";var h={shouldOpenSnowlift:function i(j){var k=j.attachments,l=j.feedback_context,m=j.attached_story,n=[];if(k)n.push.apply(n,k);if(l&&l.relevant_comments){var o=l.relevant_comments;o.reduce(function(p,q){return p.concat(q.attachments)},n)}if(m&&m.attachments)n.push.apply(n,m.attachments);return n.some(function(p){if(!p.style_list||!p.style_list.length)return false;var q=p.style_list[0];return!!c("NotificationAttachmentConfig").snowliftStyles[q]})}};f.exports=h}),null);
__d("NotificationConstants",[],(function a(b,c,d,e,f,g){f.exports={PayloadSourceType:{UNKNOWN:0,USER_ACTION:1,LIVE_SEND:2,ENDPOINT:3,INITIAL_LOAD:4,OTHER_APPLICATION:5,SYNC:6,CLIENT:7}}}),null);
__d("NotificationPhotoThumbnail",["NotificationAttachmentConfig"],(function a(b,c,d,e,f,g){"use strict";function h(j){if(!j.media||!j.style_list||!j.style_list.length)return null;var k=j.style_list[0];if(c("NotificationAttachmentConfig").thumbnailStyles[k])return j.media.image;return null}var i={getThumbnailForNotification:function j(k){var l=k.attachments,m=k.attached_story,n=k.feedback_context;return i.getThumbnail(l,m,n)},getThumbnail:function j(k,l,m){var n=void 0;if(k&&k.length){k.some(function(r){n=h(r);if(n)return true;return false});if(n)return n}if(m){var o=m.relevant_comments;if(o&&o.length){var p=o[0].attachments;if(p&&p.length){n=h(p[0]);if(n)return n}}}if(l){var q=l.attachments;if(q&&q.length)return h(q[0])}return null}};f.exports=i}),null);
__d("NotificationURI",["BusinessURI.brands","URI","VideoPermalinkURI","isFacebookURI"],(function a(b,c,d,e,f,g){var h={localize:function i(j){try{j=c("BusinessURI.brands")(j)}catch(k){return j.toString()}var l=j.getSubdomain();return j.getUnqualifiedURI().getQualifiedURI().setSubdomain(l).toString()},snowliftable:function i(j){if(!j)return false;var k=new(c("URI"))(j),l=k.getQueryData();return c("isFacebookURI")(k)&&(c("VideoPermalinkURI").isValid(k)||"fbid"in l)},isVaultSetURI:function i(j){return this._areEquals(j,"/ajax/vault/sharer_preview.php")},isAlbumDraftRecoveryDialogURI:function i(j){return this._areEquals(j,"/ajax/photos/upload/overlay/")},isQuicksilverURI:function i(j){return this._areEquals(j,"/games/quicksilver/spotlight/")},isDirectURI:function i(j){return this._startsWith(j,"/direct/")},isIGAccountCreationURI:function i(j){return this._areEquals(j,"/ads/growth/aymt/instagram/account-creation-dialog/")},_areEquals:function i(j,k){if(!j)return false;var l=new(c("URI"))(j);return c("isFacebookURI")(l)&&l.getPath()===k},_startsWith:function i(j,k){if(!j)return false;var l=new(c("URI"))(j);return c("isFacebookURI")(l)&&l.getPath().startsWith(k)}};f.exports=h}),null);
__d("NotificationUtils",["NotificationAttachmentUtils","NotificationURI","URI"],(function a(b,c,d,e,f,g){"use strict";var h={getLinkProps:function i(j){var k=c("NotificationURI").localize(new(c("URI"))(j.url)),l=k,m=h.canRenderInVideoChannelView(j.rendererData),n=h.canRenderInTahoe(j.rendererData),o=h.canRenderInStoryTray(j.rendererData);if(m||n||o)return{href:l};var p=c("NotificationAttachmentUtils").shouldOpenSnowlift(j)&&c("NotificationURI").snowliftable(k),q=c("NotificationURI").isAlbumDraftRecoveryDialogURI(k),r=p||q?k:j.ajaxify_url||"",s=null;if(p)s="theater";else if(q)s="async-post";else if(c("NotificationURI").isQuicksilverURI(r)||c("NotificationURI").isIGAccountCreationURI(r))s="dialog-post";else if(c("NotificationURI").isDirectURI(k))s="async";else if(r)s="dialog";return{ajaxify:r,href:l,rel:s}},canRenderInVideoChannelView:function i(j){return!!(j&&j.video_channel_id)},canRenderInTahoe:function i(j){return!!(j&&j.can_render_in_tahoe)},canRenderInStoryTray:function i(j){return!!(j&&j.bucket_data)}};f.exports=h}),null);
__d("normalizeNotificationUpdatePayload",["NotificationPhotoThumbnail","NotificationUtils"],(function a(b,c,d,e,f,g){"use strict";function h(j){if(Array.isArray(j.eligible_buckets))j.eligible_buckets=j.eligible_buckets.map(function(q){return q.toUpperCase()});if(Object.prototype.hasOwnProperty.call(j,"menu_options")){var k=j,l=k.menu_options;delete k.menu_options;j.notif_option_sets={edges:l&&[{node:{notif_options:{edges:l&&l.map(function(q){return{node:{client_info:{action_type:q.client_action,undo_server_action:q.undo_server_action},server_action:q.server_action,option_display:{text:{text:q.text},subtext:q.subtext!=null?{text:q.subtext}:null,undo_text:q.undo_text}}}})}}}]}}if(Object.prototype.hasOwnProperty.call(j,"previewImage")===false){var m=j,n=c("NotificationPhotoThumbnail").getThumbnailForNotification(m);j.previewImage=n}if(Object.prototype.hasOwnProperty.call(j,"primerAttributes")===false){var o=j,p=c("NotificationUtils").getLinkProps(o);j.primerAttributes={ajaxify:p.ajaxify===undefined?undefined:p.ajaxify,rel:p.rel};delete o.ajaxify_url}return j}function i(j){j=j;if(j.nodes!=null&&Array.isArray(j.nodes))j.nodes=j.nodes.map(h);return j}f.exports=i}),null);
__d("NotificationServerTransport",["AjaxPipeRequest","DOM","normalizeNotificationUpdatePayload","setImmediateAcrossTransitions","uniqueID"],(function a(b,c,d,e,f,g){"use strict";var h={},i={},j={},k={},l={};function m(q){if(l[q]==null){l[q]=c("DOM").create("div",{"class":"hidden_elem",id:q});c("DOM").appendContent(document.documentElement,l[q])}return l[q].id}function n(q){return q.reduce(function(r,s){var t=s.targetNumToLoad;return Math.max(r,t)},0)}function o(q){var r=q.getHash();if(k[r]!=null)return;k[r]=c("setImmediateAcrossTransitions")(function(){delete k[r];var s=c("uniqueID")(),t=j[r];delete j[r];if(t==null)return;var u=n(t),v=q.getRequestParams(u);if(v.length<=0){t.forEach(function(z){var A=z.onCompleted;if(A)A()});return}function w(z){var A=h[r];delete i[s];if(A.clientRequestID!==s)return;delete h[r];A.calls.forEach(function(B){var C=B.onError;if(C)C(z)});if(j[r]!=null)o(q)}function x(z){var A=h[r];delete i[s];if(A.clientRequestID!==s)return;delete h[r];A.calls.forEach(function(B){var C=B.onCompleted;if(C)C()});if(j[r]!=null)o(q)}var y=new(c("AjaxPipeRequest"))("/ajax/pagelet/generic.php/WebNotificationsPayloadPagelet",{data:JSON.stringify(babelHelpers["extends"]({},v,{clientRequestID:s}))}).setAllowCrossPageTransition(true).setAllowIrrelevantRequests(true).setAutomatic(false).setCanvasId(m(s)).setErrorHandler(w).setFinallyHandler(x).setJSNonBlock(true).setTransportErrorHandler(w);h[r]={calls:t,clientRequestID:s,transport:y};i[s]=t.map(function(z){return z.onChunkResponse});y.send()})}var p={makeRequest:function q(r,s,t){var u=t.onChunkResponse,v=t.onCompleted,w=t.onError,x=r.getHash(),y={onChunkResponse:u,onCompleted:v,onError:w,targetNumToLoad:s},z=h[x],A=z?n(z.calls)>=s:false;if(A)z.calls.push(y);else{if(j[x]==null)j[x]=[];j[x].push(y);if(z==null)o(r)}return{remove:function B(){var z=h[x];if(z!=null){var C=z.calls.indexOf(y);if(C!==-1)z.calls.splice(C,1);if(z.calls.length===0){z.transport.abandon();delete h[x];delete i[z.clientRequestID]}}var D=j[x];if(D!=null){var E=D.indexOf(y);if(E!==-1)D.splice(E,1)}}}},handleResponseChunk:function q(r,s){var t=i[r];if(t==null)return;t.forEach(function(u){u(c("normalizeNotificationUpdatePayload")(s))})}};f.exports=p}),null);
__d("NotificationServerTransportLegacy",["AsyncRequest","normalizeNotificationUpdatePayload"],(function a(b,c,d,e,f,g){"use strict";var h={makeRequest:function i(j,k,l){var m=l.onError,n=l.onChunkResponse,o=l.onCompleted,p=true;function q(u){if(!p)return;var v=c("normalizeNotificationUpdatePayload")(u.getPayload());try{n(v)}finally{o()}}function r(u){if(!p)return;if(m)m(u)}var s=j.getRequestParams(k);if(s.length<=0){o();return{remove:function u(){}}}var t=new(c("AsyncRequest"))(j.endpointURI).setAllowCrossPageTransition(true).setData(s).setErrorHandler(r).setTransportErrorHandler(r).setHandler(q);t.send();return{remove:function u(){p=false;t.abandon()}}}};f.exports=h}),null);
__d("NotificationsDefaultEndpointURI",[],(function a(b,c,d,e,f,g){"use strict";f.exports="/ajax/notifications/client/get.php"}),null);
__d("sortBy",[],(function a(b,c,d,e,f,g){"use strict";function h(i,j){var k=i.map(function(l,m){return{index:m,sortValue:j(l),value:l}});k.sort(function(l,m){var n=l.sortValue,o=m.sortValue;if(n>o)return 1;if(n<o)return-1;return l.index-m.index});return k.map(function(l){return l.value})}f.exports=h}),null);
__d("NotificationStore",["AsyncFeature","BusinessUserConf","ErrorUtils","KeyedCallbackManager","NotificationConstants","NotificationListConfig","NotificationsDefaultEndpointURI","NotificationServerTransport","NotificationServerTransportLegacy","NotificationUpdates","QE2Logger","RangedCallbackManager","createObjectBy","distinctArrayBy","flatMapArray","objectValues","sortBy","sprintf","stableStringify"],(function a(b,c,d,e,f,g){var h={};function i(o,p,q){return o.page_info!=null&&p.classification==q.classification&&p.endpointURI===q.endpointURI&&p.filter==q.filter}function j(o,p){var q={};m.getAllInstances(p.endpointURI).forEach(function(r){var s=void 0;if(i(o,r,p)){r.graphQLPageInfo=o.page_info;s=o}else if(o.payloadsource===c("NotificationConstants").PayloadSourceType.SYNC&&p.endpointURI===c("NotificationsDefaultEndpointURI")&&r.classification==null&&r.filter==null)s=o;else s=babelHelpers["extends"]({},o,{nodes:o.nodes?o.nodes.filter(function(u){return k(u,r)}):undefined});if(s.nodes&&s.nodes.length>0){var t=l(r,s);if(t!=null)t.forEach(function(u){q[u]=true})}});c("NotificationUpdates").didUpdateNotifications(Object.keys(q))}function k(o,p){var q=p.classification,r=p.filter,s=p.notifications,t=p.order,u=t.getAllResources();u.length===0;if(u.length>0){var v=u[0],w=s.getResource(v);if(w.creation_time>=o.creation_time)return false}if(q&&(!o.classifications||!o.classifications.includes(q)))return false;if(r&&r==="read"!==(o.seen_state==="SEEN_AND_READ"))return false;return true}function l(o,p){var q=[],r={};if(p.nodes&&p.nodes.length>0)p.nodes.forEach(function(s){var t=s.alert_id,u=o.notifications.getResource(t);if(!u||u.creation_time<s.creation_time){q.push(t);r[t]=s}});o.notifications.addResourcesAndExecute(r);o.order.addResources(q);return q}m.getInstance=function(o){"use strict";var p=o.classification!=null?o.classification:"_",q=o.filter!=null?o.filter:"_",r="(f)"+q+"(c)"+p,s=m.$EndpointState1[o.endpointURI];if(s==null)m.$EndpointState1[o.endpointURI]=s={};if(s[r]==null)s[r]=new m(o);return s[r]};m.getAllInstances=function(o){"use strict";var p=void 0;if(o!=null)p=[o];else p=Object.keys(m.$EndpointState1);return c("flatMapArray")(p,function(o){var q=m.$EndpointState1[o];if(q==null)return[];else return c("objectValues")(q)})};function m(o){var p=o.businessUserID,q=o.classification,r=o.endpointURI,s=o.filter;"use strict";this.notifications=new(c("KeyedCallbackManager"))();this.businessUserID=p!=null?p:c("BusinessUserConf").businessUserID;this.classification=q;this.endpointURI=r;this.filter=s;var t=function t(u){var v=this.notifications.getResource(u);return v.creation_time};this.order=new(c("RangedCallbackManager"))(t.bind(this),function(u,v){return v-u});this.graphQLPageInfo=null}m.prototype.getConfig=function(){"use strict";return{businessUserID:this.businessUserID,classification:this.classification,endpointURI:this.endpointURI,filter:this.filter}};m.prototype.getHash=function(){"use strict";return c("stableStringify")(this.getConfig())};m.prototype.getRequestParams=function(o){"use strict";var p=Math.max(0,o-this.order.getAllResources().length);return{businessUserID:this.businessUserID,classification:this.classification,cursor:this.graphQLPageInfo&&this.graphQLPageInfo.end_cursor,filter:this.filter,length:p}};m.$EndpointState1={};c("NotificationUpdates").subscribe("update-notifications",function(o,p){if(p.payloadsource!==c("NotificationConstants").PayloadSourceType.ENDPOINT)j(p,{endpointURI:p.endpoint!=null?p.endpoint:c("NotificationsDefaultEndpointURI")})});var n={getNotifications:function o(p,q,r){var s=m.getInstance(q),t=s.notifications,u=s.order,v=void 0,w=u.executeOrEnqueue(0,p,function(F){if(r){v=t.executeOrEnqueue(F,r);var G=t.getUnavailableResources(v);if(G.length>0)c("ErrorUtils").reportError(new Error(c("sprintf")("The range for this endpoint contained notification IDs for which we have no payload (Notification IDs: `%s`. Endpoint config: `%s`).",JSON.stringify(G),JSON.stringify(s.getConfig()))))}});function x(){u.unsubscribe(w);if(v)t.unsubscribe(v)}if(u.getUnavailableResources(w).length===0)return{remove:x};if(!n.canFetchMore(q)){u.forceRunCallbacks();return{remove:x}}var y=s.getHash();if(h[y]==null)h[y]=1;else h[y]++;function z(){h[y]--;if(h[y]===0)u.forceRunCallbacks()}function A(F){if(!(F&&F.nodes))return;c("NotificationUpdates").handleUpdate(c("NotificationConstants").PayloadSourceType.ENDPOINT,F,q.filter,q.classification);j(babelHelpers["extends"]({},F,{payloadsource:c("NotificationConstants").PayloadSourceType.ENDPOINT}),q)}function B(){h[y]--;if(h[y]===0)u.forceRunCallbacks()}var C=void 0;if(q.endpointURI===c("NotificationsDefaultEndpointURI")&&c("AsyncFeature").__serverHasFeatureImpl(8)&&c("NotificationListConfig").useStreamingTransport)C=c("NotificationServerTransport");else C=c("NotificationServerTransportLegacy");if(q.endpointURI===c("NotificationsDefaultEndpointURI")&&c("AsyncFeature").__serverHasFeatureImpl(8))c("QE2Logger").logExposureForUser("www_notifications_perf_h2_2017");var D=C.makeRequest(s,p,{onChunkResponse:A,onCompleted:B,onError:z}),E=D.remove;return{remove:function F(){x();E()}}},getNotification:function o(p){var q=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],r=q.classification,s=q.endpointURI,t=s===undefined?c("NotificationsDefaultEndpointURI"):s,u=q.filter,v=m.getInstance({classification:r,endpointURI:t,filter:u}),w=v.notifications;return w.getResource(p)},getAllForAllEndpoints:function o(){var p=m.getAllInstances(),q=c("flatMapArray")(p,function(u){var v=this.getAll(u.getConfig());return c("objectValues")(v)}.bind(this)),r=c("sortBy")(q,function(u){return u.creation_time}),s=r.reverse(),t=c("distinctArrayBy")(s,function(u){return u.alert_id});return c("createObjectBy")(t,function(u){return u.alert_id})},getAll:function o(p){var q=m.getInstance(p),r=q.notifications,s=q.order,t={};s.getAllResources().forEach(function(u){var v=r.getResource(u);if(v==null)c("ErrorUtils").reportError(new Error(c("sprintf")("The range for this endpoint contained a notification ID for which we have no payload (Notification ID: `%s`. Endpoint config: `%s`).",u,JSON.stringify(p))));else t[u]=v});return t},getCount:function o(p){var q=m.getInstance(p);return q.order.getAllResources().length},canFetchMore:function o(p){var q=m.getInstance(p),r=q.graphQLPageInfo;return!r||!Object.prototype.hasOwnProperty.call(r,"has_next_page")||r.has_next_page},registerEndpoint:function o(p){m.getInstance(p)}};n.registerEndpoint({endpointURI:c("NotificationsDefaultEndpointURI")});f.exports=n}),null);
__d("NotificationUpdates",["Arbiter","AsyncRequest","BusinessUserConf","ChannelConstants","JSLogger","LiveTimer","NotificationConstants","NotificationTokens","createObjectFrom","normalizeNotificationUpdatePayload","NotificationStore"],(function a(b,c,d,e,f,g){var h={},i={},j={},k={},l=false,m=[],n=0,o=void 0,p=new(c("Arbiter"))(),q=c("JSLogger").create("notification_updates");function r(){if(n)return;var w=h,x=i,y=j,z=k;h={};i={};j={};k={};if(Object.keys(w).length||l){l=false;t("notifications-updated",w)}if(Object.keys(x).length)t("seen-state-updated",x);if(Object.keys(y).length)t("read-state-updated",y);if(Object.keys(z).length)t("hidden-state-updated",z);m.pop()}function s(){if(m.length)return m[m.length-1];return c("NotificationConstants").PayloadSourceType.UNKNOWN}function t(event,w){v.inform(event,{updates:w,source:s()})}var u=null,v={getserverTime:function w(){return u},setEndPoint:function w(x){o=x},handleUpdate:function w(x,y,z,A){y=c("normalizeNotificationUpdatePayload")(y);if(y.nodes&&Array.isArray(y.nodes))y.nodes=this._filterNodesBasedOnBusinessUser(y.nodes,c("BusinessUserConf").businessUserID);if(y.servertime){u=y.servertime;c("LiveTimer").restart(y.servertime)}var B=y.nodes;if(o&&x===c("NotificationConstants").PayloadSourceType.LIVE_SEND&&B&&Array.isArray(B)&&B.length>0){var C=c("NotificationStore"),D={classification:A,endpointURI:o,filter:z};if(C.getCount(D)>0||!C.canFetchMore(D))return;new(c("AsyncRequest"))(o).setAllowCrossPageTransition(true).setData({businessUserID:c("BusinessUserConf").businessUserID,classification:A,filter:z,length:B.length}).setHandler(function(E){var y=E.getPayload();if(y==null)return;var F=y.nodes;if(F==null||F.length===0)return;var G={};F.forEach(function(H){var I=H.alert_id;G[I]=true});y.nodes=B.filter(function(H){var I=H.alert_id;return G[I]===true});if(y.nodes.length>0)this._updateWithPayload(x,y)}.bind(this)).send()}else this._updateWithPayload(x,y)},_updateWithPayload:function w(x,y){if(Object.keys(y).length)this.synchronizeInforms(function(){m.push(x);var z=babelHelpers["extends"]({},y,{payloadsource:s()});this.inform("update-notifications",z);this.inform("update-seen",z);this.inform("update-read",z);this.inform("update-hidden",z)}.bind(this))},getArbiter:function w(){return p},inform:function w(event,x){return p.inform(event,x)},subscribe:function w(event,x){return p.subscribe(event,x)},didUpdateNotifications:function w(x){Object.assign(h,c("createObjectFrom")(x));l=true;r()},didUpdateSeenState:function w(x){Object.assign(i,c("createObjectFrom")(x));r()},didUpdateReadState:function w(x){Object.assign(j,c("createObjectFrom")(x));r()},didUpdateHiddenState:function w(x){Object.assign(k,c("createObjectFrom")(x));r()},synchronizeInforms:function w(x){n++;try{x()}catch(y){throw y}finally{n--;r()}},_filterNodesBasedOnBusinessUser:function w(x,y){return x.filter(function(z){return y==z.biz_user_id})}};c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("notification_json"),function(w,x){var y=Date.now(),z=x.obj.nodes;if(z){z.forEach(function(B){B.receivedTime=y});q.debug("notifications_received",z);var A=x.obj.servertime;v.handleUpdate(c("NotificationConstants").PayloadSourceType.LIVE_SEND,{nodes:z,servertime:A})}});c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("notifications_seen"),function(w,x){var y=c("NotificationTokens").tokenizeIDs(x.obj.alert_ids),z=x.obj.new_state;v.handleUpdate(c("NotificationConstants").PayloadSourceType.LIVE_SEND,{seenState:c("createObjectFrom")(y,z)})});c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("notifications_read"),function(w,x){var y=c("NotificationTokens").tokenizeIDs(x.obj.alert_ids),z=x.obj.new_state;v.handleUpdate(c("NotificationConstants").PayloadSourceType.LIVE_SEND,{readState:c("createObjectFrom")(y,z)})});c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("notification_hidden"),function(w,x){var y=c("NotificationTokens").tokenizeIDs([x.obj.notif_id+""]),z=x.obj.state===1;v.handleUpdate(c("NotificationConstants").PayloadSourceType.LIVE_SEND,{hiddenState:c("createObjectFrom")(y,z)})});f.exports=v}),null);
__d("NotificationOptionActionWebGraphQLMutation",["WebGraphQLMutationBase"],(function a(b,c,d,e,f,g){"use strict";f.exports=function(){var h,i;h=babelHelpers.inherits(j,c("WebGraphQLMutationBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1420844941369152"};j.getQueryID=function(){"use strict";return"318967338567215"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("NotificationUserActions",["AsyncRequest","Bootloader","BusinessUserConf","CurrentUser","NotificationConstants","NotificationOptionActionWebGraphQLMutation","NotificationTokens","NotificationUpdates","WebGraphQL","createObjectFrom"],(function a(b,c,d,e,f,g){var h=c("NotificationConstants").PayloadSourceType.USER_ACTION,i=false;function j(m){if(c("BusinessUserConf").businessUserID!=null)m.biz_user_id=c("BusinessUserConf").businessUserID;new(c("AsyncRequest"))("/ajax/notifications/mark_read.php").setData(m).setAllowCrossPageTransition(true).send()}function k(m){var n={};m.forEach(function(o,p){n["alert_ids["+p+"]"]=o});return n}var l={markNotificationsAsSeen:function m(n){var o=document.getElementById("notificationsCountValue"),p=null;if(o)p=o.textContent;c("NotificationUpdates").handleUpdate(h,{seenState:c("createObjectFrom")(n)});var q=c("NotificationTokens").untokenizeIDs(n),r=k(q);r.seen=true;if(p)r.badgeCount=p;j(r)},setNextIsFromReadButton:function m(n){i=n},markNotificationsAsRead:function m(n,o){c("NotificationUpdates").handleUpdate(h,{readState:c("createObjectFrom")(n,true)});var p=c("NotificationTokens").untokenizeIDs(n),q=k(p);if(i){q.from_read_button=true;i=false}if(o)q.source_view=o;j(q)},markNotificationsAsUnread:function m(n,o){c("NotificationUpdates").handleUpdate(h,{readState:c("createObjectFrom")(n,false)});var p=c("NotificationTokens").untokenizeIDs(n),q=k(p);if(i){q.from_read_button=true;i=false}q.unread=true;if(o)q.source_view=o;j(q)},markAllNotificationsAsRead:function m(){c("Bootloader").loadModules(["NotificationSeenState"],function(n){var o=n.getUnreadIDs();if(o.length>0)c("NotificationUpdates").handleUpdate(h,{readState:c("createObjectFrom")(o)});var p={read:true};if(i){p.from_read_button=true;i=false}j(p)},"NotificationUserActions")},sendNotifOption:function m(n){return c("WebGraphQL").exec(new(c("NotificationOptionActionWebGraphQLMutation"))({input:{action_type:n,actor_id:c("BusinessUserConf").businessUserID?""+c("BusinessUserConf").businessUserID:c("CurrentUser").getID(),client_mutation_id:"0"}}))}};f.exports=l}),null);
__d("ConversationNubAddTabSource",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NOTIFICATION:"notification",PAGE_REFRESH:"page_refresh",USER_PIN:"user_pin",UNSEEN_NOTIFICATION:"unseen_notification",UNKNOWN:"unknown"})}),null);
__d("once",[],(function a(b,c,d,e,f,g){"use strict";function h(j){var k=i(j);for(var l in j)if(Object.prototype.hasOwnProperty.call(j,l))k[l]=j[l];return k}function i(j){var k=j,l=void 0,m=function m(){if(k){l=k.apply(this,arguments);k=null}return l};return m}f.exports=h}),null);
__d("ConversationNotificationListeners",["Bootloader","ConversationNubAddTabSource","NotificationConstants","NotificationUpdates","PinnedConversationNubsConfig","once"],(function a(b,c,d,e,f,g){"use strict";var h=c("NotificationConstants").PayloadSourceType,i=h.LIVE_SEND,j=h.OTHER_APPLICATION,k=c("once")(function(){var l="update-notifications";c("NotificationUpdates").subscribe(l,function(m,n){var o;if(c("PinnedConversationNubsConfig").sharedNotificationsReadStateEnabled&&n.payloadsource===i&&n.readState&&Object.keys(n.readState).length)c("Bootloader").loadModules(["NotificationConversationController"],function(p){p.handleNotificationsRead(n.readState)},"ConversationNotificationListeners");else if(n.payloadsource===i||n.payloadsource===j)(function(){var p=n.nodes,q=p&&p.length&&p.some(function(r){return r.pinnedConvoConfig});if(q)c("Bootloader").loadModules(["NotificationConversationController"],function(r){r.handleNewNotifications(p,c("ConversationNubAddTabSource").NOTIFICATION)},"ConversationNotificationListeners")})()})});f.exports={initialize:function l(){k()}}}),null);
__d("NotificationJewelReminderLoader",[],(function a(b,c,d,e,f,g){f.exports={init:function h(i,j){i.load().done(function(k){k.init(j)})}}}),null);