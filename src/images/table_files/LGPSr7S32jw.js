if (self.CavalryLogger) { CavalryLogger.start_js(["bLIFC"]); }

__d("BrowseLinkType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({RESULT_PERMALINK:"result_permalink",MODULE_ENDPOINT:"module_endpoint",EXPAND_INLINE:"expand_inline",MODAL:"modal",SINGLE_TARGET_WITH_ENDPOINT:"single_target_with_endpoint",CARDED_MODAL:"carded_modal"})}),null);
__d("XAsyncSearchInlineExpandStoryController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/search/async/expand_story/",{story_token:{type:"String"},has_snippet:{type:"Bool",defaultValue:false},unicorn_story_id:{type:"String"},browse_location:{type:"String",defaultValue:"browse_location:browse"}})}),null);
__d("XAsyncSearchStoryModalViewController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/search/async/story_modal/",{browse_location:{type:"String",defaultValue:"browse_location:browse"},story_token:{type:"String",required:true},unicorn_story_id:{type:"String",required:true},link_type:{type:"String",defaultValue:"modal"},__asyncDialog:{type:"Int"}})}),null);
__d("DenseStoryInlineExpansion",["cx","invariant","AsyncRequest","BanzaiODS","Bootloader","BrowseLinkType","CSS","DOM","Event","URI","XAsyncSearchInlineExpandStoryController","XAsyncSearchStoryModalViewController","tidyEvent"],(function a(b,c,d,e,f,g,h,i){"use strict";var j={addListenerForClick:function k(l,m){var n=false;c("tidyEvent")(c("Event").listen(l,"click",function(event){if(n&&!this.isModal(m))return;n=true;event.preventDefault();event.stopPropagation();if(this.isModal(m))this.handleModalClick(m);else if(m.linkType===c("BrowseLinkType").SINGLE_TARGET_WITH_ENDPOINT)this.handleModuleEndpointClick(m);else this.handleInlineExpansionClick(m)}.bind(this)))},handleModalClick:function k(l){c("Bootloader").loadModules(["AsyncDialog"],function(m){var n=c("XAsyncSearchStoryModalViewController").getURIBuilder().setString("story_token",l.storyToken).setString("unicorn_story_id",l.unicornStoryID).setString("browse_location",l.browseLocation).setString("link_type",l.linkType).getURI();m.send(new(c("AsyncRequest"))(n))},"DenseStoryInlineExpansion")},handleInlineExpansionClick:function k(l){var m=l.snippetElem,n=m!=null;c("DOM").replace(l.storyElem,l.placeholderElem);var o=c("XAsyncSearchInlineExpandStoryController").getURIBuilder().setString("story_token",l.storyToken).setBool("has_snippet",n).setString("unicorn_story_id",l.unicornStoryID).setString("browse_location",l.browseLocation).getURI();c("BanzaiODS").bumpEntityKey("search_story_expansion","render_attempt");new(c("AsyncRequest"))().setURI(o).setHandler(function(p){c("DOM").replace(l.placeholderElem,p.payload);if(m!=null)c("CSS").addClass(m,"_1nlc")}).setErrorHandler(function(p){c("BanzaiODS").bumpEntityKey("search_story_expansion","render_failure")}).send()},handleModuleEndpointClick:function k(l){var m=l.moduleEndpointURI;m!=null||i(0);c("URI").go(m)},isModal:function k(l){return l.linkType===c("BrowseLinkType").CARDED_MODAL||l.linkType===c("BrowseLinkType").MODAL}};f.exports=j}),null);